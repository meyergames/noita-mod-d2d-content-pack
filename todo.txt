content checklist
[ ] linked to translation.csv?
[ ] does the spawn probability feel right? (for spells/items)
[ ] happy with the icon?
[ ] how's the tooltip look?

spells
[-] is optimize ship-ready? <-- scrapped, not meaningful enough
[x] is mana refill ship-ready? + alt fire?
[x] is summon wall ship-ready? + alt fire?
[x] is flurry ship-ready?
[x] is overclock ship-ready?
[x] is missing mana to damage ship-ready? <-- WOOOOO (except it doesn't work as an always-cast now)
[x] is payday ship-ready?
[x] is sniper bolt ship-ready?
[x] is sniper bolt w/ trigger ship-ready?
[x] is small explosion ship-ready?
[x] is giga drain ship-ready?
[x] is ghost trigger ship-ready?
[-] try using potion logic to destroy the banana bombs on contact with terrain <-- tried, better leave it for a future patch
[x] are the banana bombs ship-ready?
[x] when bag of bombs is used with bombs materialized, default to throwing dynamite
[x] is bag of bombs ship-ready?
[x] add the same explosion sprite to the volcanic/infernal drills as the banana bomb + add berserkium sparks, to reflect that one gif that inspired the spells
[x] remove on_fire applying effect from the drills
[-] is volcanic drill ship-ready? <--- feature creep, cause I thought the drill + master of bombs + berserkium looked so cool...
[-] is infernal drill ship-ready?



perks
[x] is time trial ship-ready?
[-] is ring of life ship-ready? <-- scrapped, design is lacking currently
[x] master_of_explosions: consider adding +1 to maxDurabilityToDestroy for all projectiles/explosions
[x] is master_of_explosions ship-ready?
[x] consider increasing mana recharge speed after being electrocuted
[x] is master_of_lightning ship-ready?
[x] consider splitting master_of_fire's effects into multiple perks, or scrapping some
[x] is master_of_fire ship-ready?
[-] is set in stone ship-ready?
[x] is the stendari curse ship-ready?
[x] is repel gold ship-ready?
[x] is the divine prank ship-ready?
[x] is overheating wands ship-ready?
[x] is arhythmic wands ship-ready?
[x] is the floor is lava ship-ready?
[x] is evolving wands ship-ready?
[-] consider locking the "master of" perks behind cursed chests? <-- nah, but it should have *some* way to feel more special than a holy mountain pickup
[-] is homebodies ship-ready? <-- scrapped, maybe another patch
curses
[x] add unique outline to curse UI icons
[x] cursed chest curse selection sequence:
    1. find a curse the player doesn't already have
    2. if the player has all curses, pick a random curse that is stackable (maybe guaranteed Curse Lifter when the player has all curses? + unlock for future runs)



items
[x] is the cursed chest ship-ready?
[x] is the emergency injection ship-ready?



final tests
[x] make sure Apotheosis' EZWand.lua calls have been replaced with this mod's
[x] check if the mod runs succesfully when Apotheosis is disabled



organization checklist
[x] pick a name!!
[x] do all file names make sense/follow a pattern?
[x] Ctrl+F "TODO" in all files
[x] all references to new file destinations updated?
[x] delete files that are no longer needed
[-] tried making OrganiseProgress work? <-- nvm, I prefer it being all bunched together after all


shipping
[x] "the mod is compatible with Apotheosis; be sure to place this mod under Apotheosis in the mod list order"
[x] "Cross-mod interactions with:"


release notes 02/09/25:
- added "borrowed time" perk
- cursed chests now have a more distinguishable sprite
- new icons for "curses to ___" spells
- renamed "master of thunder" to "master of lightning"
- bugfix: cursed chests now spawn the correct amount of random spells





patch 1.2

[ ] figure out how to properly remove perks. curse lifter might be an important perk to implement.
[ ] lock "master of" perks behind killing the Master of Masters with the corresponding weakening curse?
  [ ] create "weakening curse - fire"
[-] LOL giga drain bubbles pass through the player if they have the "phasing" perk. should this change...? <-- nah



ALT FIRE ANYTHING

A spell inspired by the various Alt Fire spells of [b]Apotheosis[/b].
This mod 

Current Limitations / Known Bugs
- Your wand loses mana for all spells slotted behind Alt Fire Anything, not just the ones that were cast
- Recharge time is fixed to just your wand's recharge time. Ideally, the fired spells' cast delay and recharge time should be added.
- Invisibility is not interrupted when alt-firing

[-] check out "directors_helpers.lua" for entity_load_chest --> better place for cursed chest logic? <-- can't find a hook here





=== 15.09.2025 ===

nucleus move speed:
[ ] make nucleus use the projectile's own speed, but let it naturally not decelerate
[ ] consider making the nucleus' move speed lower if it's far away from the player

nucleus mechanics:
[ ] maybe make the whole spell mana-blue?! or even electric??!!?!?! (look at thunder charge (thunderball.xml))
[ ] don't use get_player() to store variables, use e.g. "owner" instead (so that for example enemies can also use it)
[ ] also scale physics_power stuff, so that creatures that do get hit get blown away real good

nucleus vfx:
[ ] add gradually increasing screenshake while charging
[ ] right before exploding, make ALL particles zap towards the projectile's absolute centerpoint (0,0); explode ~20 frames later
[ ] Nathan's idea for explosion particles with less drag / more spin?
[ ] Graham's idea for an extra bright flash of light on detonation?
[ ] Copi's idea for a hit stun?
[ ] Mamumimi's idea for looking into orb_expanding to make the sprite bigger over time?

nucleus sfx:
[ ] look for a better firing sound maybe (not the firebolt one)
[ ] maybe another looping sound on top of the black hole one? to make it layered/more unique
[ ] add lava rumbling sound at some point, also ukko electric crackling maybe (can we edit "m_volume" in AudioLoopComponent?)
[ ] concentrated mana sound that increases in volume 0-100 as charges increase from 0-1000?
[ ] change/add to explosion sound based on charge amount

nucleus testing/promo:
[ ] current interaction with speed modifiers?
[ ] interaction with larpa?
[ ] quote the threaded post in #mod-showcase to broadcast its addition to the d2d pack



=== 16.09.2025 ===

[ ] mirror spell: "Polymorphs you into whatever creature it hits" (max. 10 uses)

[ ] ice barrage mage: encases you in a block of ice when its projectile hits you

[ ] "master of" perks: deal 10k+ damage with the corresponding element to unlock the perk?

[ ] flamethrower: an actual continuous stream of small fire "projectiles" that penetrates enemies and does a tiny amount of (ACTUAL)
    fire dmg per frame. to make it an actual stream, cast delay and reload time should be super low (like lumi drill: -0.58 / -0.17?)
    [ ] could be cool but could also be feature creep: make each projectile fired increase the intensity of the flamethrower,
        until mouse is released



=== 19.09.2025 ===

[-] perk that makes gold nuggets glow in the dark <-- tooo niche
[x] friend of the fairies perk should not heal the player if it reduces incoming damage below 0; summon fairies should not spawn from 
    it; limit damage reduction to 50% of original damage?
[x] flurry might be too strong, if you have a wand with high mana charge speed, there's no reason to use reduce recharge time anymore
[ ] check "slow projectiles" spell code for double damage?
[ ] spell that can only have 1 in existence, but its cast delay is extremely low (so it becomes super strong close-range)
[ ] summon fairies: add giant fairy death particles on small fairies spawn?


=== 24.09.2025 (and later) ===

[ ] make giga drain bubbles ignore shields (if possible), since touching them with a shield makes them un-pickupable
[ ] giga drain damage could be finetuned to make it possible to deal minimal damage to a drained enemy
[ ] giga drain recoil could be halved maybe
[ ] enemies that do not drop gold (i.e. hive spawns) should not drop bubbles?
[ ] giga drain: track total max hp gained by giga drain, GamePrint every 50th
[ ] master of fire: bring 2 or 3 kivaskivi somewhere?
[x] make overclock always explode at the wand's position (instead of on a payload)
[ ] set giga drain's speed to 0, but spawn it at the wand's launch point if not on a payload?

[x] reverse force field vfx (absorb instead of repulse) --> test / change in open aseprite project <-- eh, revert




CardUI, Card, CardCopy ==> CardUI, CardData, Card

[x] "Reach the next UNVISITED Holy Mountain within 60 seconds"

[ ] check out the balloon of Graham's Things for Heart Balloon technical inspiration
[ ] check out the umbrella shield of Graham's Things for Reactive Shield technical inspiration
[ ] https://github.com/Neffc/narg/ for alchemy recipe predictions (for cursed chest loot)
[ ] https://noita.wiki.gg/wiki/Mod:Graham%27s_Things/Spells/Connection_Trail coooool
[ ] fixed altituded could do with a little -cast delay/recharge time for flavour and appeal

[x] giving Master Of Lightning stun protection disables its boost after being electrocuted. maybe change that to "only damaging projectiles gain an electric charge?"

[x] add mod settings to disable individual spells/perks

[ ] if the "Disable Auto Pickup" mod is enabled, spawn a non-auto-pickup version of the Hammer



TEMPLE SMITH
[x] Goki: "I think that it [downgrading the hammer instead of removing it when taking only the heart or only the refresher] would add some value for the main path, since once people are in PWs it's a clear choice to use it, but in the main path, the value of the HM heal is way higher than the refresh
so it'd reward players who can give up the heal, while still being useful for those that need the heal but can forgo the refresh"

[ ] also Goki: "does it work if you leave hearts and refreshes behind on prior HMs?"
    me: "could add a scan that checks if there are any hearts + refreshes without nearby hammers and spawn them retroactively, though I'll add that to my to-do for later :P"
    Goki: "it'd probably be easiest to have an entity loaded in the HM by default if the perk is able to load (i.e. the mod is on, and if the mod can disable perks, that isn't disabled) and then use that entity to spawn it if the perk is enabled"


[x] emergency injection: (toggleable option to) automatically inject if the player would've died

[x] Mana Lock at 90% reduction rate sometimes sets mana drain to 0? try with GamePrint to see what is stored/refunded
[x] Mana Lock more accurate wording: call it "refund" instead of "reduce"

[x] Feline Affection: cats not immortal, but on_damage_about_to_received() nullifies damage coming from enemies, and "teleports" them away if the player is the damage source
    [ ] Test if different despawn approach works

[ ] AFA: disable when electrocuted etc

[ ] Time Trial: instead of spawning all reward spells on the ground, make a cool wand hold them
    [ ] unique teleport-themed wand sprite
    [ ] bronze chest: t3 stats (non-shuffle)
    [ ] silver chest: t4 stats (non-shuffle) + afa
    [ ] gold chest: t6 stats (non-shuffle) + afa







[x] Surface (normal start)
^ no new setup needed

[ ] Mines (light)
+ primary: light + 2x spark bolt/bubble shot/spitter bolt/bouncing burst
+ secondary: energy orb/magic bolt w/ trigger + all-seeing eye
    > trigger spell with *some* digging potential (it shouldn't be worse than the basic loadout)
    > with *just* enough mana for both
        -- learns the player about triggers. more specifically, when their payloads do and do not trigger:
            -- there must be collision
            -- there must be enough mana on the wand for the entire payload
+ possible items: default pool

[ ] Coal Pits (mining)
+ primary: energy orb / shotgun (fast but expensive to use, so it can burst but also teach firing restraint) / plasma beam
+ secondary: drill shot (common) / plasma beam? (uncommon)
+ possible items: gunpowder (common) / acid potion (uncommon) / water
    -- any wand mechanics we could teach the player here?

[ ] Snowy Depths (fire)
+ primary: ( torch + burst of air ) || ( fire trail + projectile )
+ secondary: fireball orbit + firebomb
+ possible items: water / lava (uncommon)

[ ] Hiisi Base (explosions)
+ primary: projectile w/ trigger + (magical) explosion
+ secondary: shuffle wand w/ always-cast explosive projectile + dynamite + bomb (invite the player to slap projectiles on this; wand power should fall off around snowy chasm)
+ possible items: berserkium / gunpowder / 

[ ] Underground Jungle (homing)


[ ] The Vault (electricity)
+ primary: 
+ secondary: lightning bolt
+ possible items: 

[ ] Temple of the Art (melee)


[ ] The Laboratory (alchemy)

