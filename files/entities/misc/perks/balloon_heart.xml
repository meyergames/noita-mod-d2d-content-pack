<Entity name="Balloon Heart" tags="perk_entity">

	<Base file="data/entities/base_projectile.xml" >
		<VelocityComponent
			gravity_y="-10"
			air_friction="2.8"
			mass="0.85"
			>
		</VelocityComponent>
	</Base>

	<ExplosionComponent>
		<config_explosion
			never_cache="1" 
			damage="0"
			camera_shake="0" 
			explosion_radius="0" 
			explosion_sprite="mods/D2DContentPack/files/particles/balloon_pop.xml"
			explosion_sprite_lifetime="0" 
			create_cell_probability="0" 
			hole_destroy_liquid="1" 
			hole_enabled="1" 
			ray_energy="0"
			particle_effect="0" 
			damage_mortals="0"
			physics_explosion_power.min="0.05"
			physics_explosion_power.max="0.1"
			physics_throw_enabled="1" 
			shake_vegetation="1" 
			sparks_enabled="0"  
			material_sparks_enabled="1"
			material_sparks_count_max="2"
			material_sparks_count_min="0" 
			light_enabled="0" 
			stains_enabled="1"
			stains_radius="3"
			audio_event_name="explosions/magic_grenade_tiny">
		</config_explosion>
	</ExplosionComponent>

  <LightComponent 
    _enabled="1" 
    radius="150" 
    r="255"
    g="255"
    b="255">
  </LightComponent>

	<PhysicsBody2Component 
		allow_sleep="1"
		angular_damping="0.01"
		linear_damping="0.3" 
		init_offset_x="9"
		root_offset_x="4"
		root_offset_y="7"
		manual_init="1"
	></PhysicsBody2Component>

	<PhysicsImageShapeComponent 
		body_id="445"
		is_root="1"
		offset_x="0"
		offset_y="0"
		image_file="mods/D2DContentPack/files/gfx/items_gfx/balloon_heart.png"
		material="metal_nohit"
	></PhysicsImageShapeComponent>
  
  <!-- <SpriteComponent 
		_enabled="1" 
		alpha="1"
		emissive="1"
		image_file="mods/D2DContentPack/files/gfx/items_gfx/balloon_heart.xml"
		next_rect_animation=""
		rect_animation=""
		offset_x="5"
		offset_y="5"
		has_special_scale="1"
		special_scale_x="1"
		special_scale_y="1"
  ></SpriteComponent> -->

  <LuaComponent
    script_source_file="mods/D2DContentPack/files/scripts/perks/balloon_heart_update.lua"
    execute_every_n_frame="1"
  ></LuaComponent>

  <LuaComponent
    script_collision_trigger_hit="mods/D2DContentPack/files/scripts/perks/balloon_heart_on_collision.lua"
  ></LuaComponent>

	<!-- string generation -->
	<LuaComponent
		script_source_file="mods/D2DContentPack/files/scripts/perks/effect_balloon_heart_create_string.lua"
		execute_on_added="1"
		execute_every_n_frame="5"
		execute_times="-1"
		>
	</LuaComponent>

  <AudioComponent
      file="data/audio/Desktop/projectiles.bank"
      event_root="player_projectiles/bullet_bubble">
  </AudioComponent>

  <CollisionTriggerComponent
  	width="12"
  	height="12"
  	radius="10"
    required_tag="projectile"
    self_trigger="1"
  	timer_for_destruction="-1" >
  </CollisionTriggerComponent>
	
	<LuaComponent
		execute_on_removed="0"
		execute_every_n_frame="750"
		script_source_file="data/scripts/projectiles/mine_animate_slow.lua"
		remove_after_executed="1">
	</LuaComponent>
  
	<VariableStorageComponent
		name="projectile_file"
		value_string="mods/d2d_beacons/files/entities/beacon.xml"
		>
	</VariableStorageComponent>

  <SpriteParticleEmitterComponent
    sprite_file="data/particles/dust.xml"
    delay="0"
    lifetime="30"
    color.r="1" color.g="1" color.b="1" color.a="1"
    color_change.r="0" color_change.g="0" color_change.b="0" color_change.a="-1"
    velocity.x="0" velocity.y="0"
    gravity.x="0" gravity.y="30"
    velocity_slowdown="0"
    rotation="0"
    angular_velocity="0"
    use_velocity_as_rotation="0"
    scale.x="1" scale.y="1"
    scale_velocity.x="0" scale_velocity.y="0"
    emission_interval_min_frames="6"
    emission_interval_max_frames="18"
    count_min="1" count_max="1"
    randomize_rotation.min="-3.1415"
    randomize_rotation.max="3.1415"
    randomize_angular_velocity.min="-15"
    randomize_angular_velocity.max="15"
    randomize_velocity.min_x="-5"
    randomize_velocity.max_x="5"
    randomize_velocity.min_y="-30"
    randomize_velocity.max_y="-10"
    randomize_position.min_x="-8"
    randomize_position.max_x="8"
    randomize_position.min_y="-8"
    randomize_position.max_y="6"
    >
  </SpriteParticleEmitterComponent>

</Entity>
